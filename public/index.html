<!DOCTYPE html>
<html>
  <head>
    <!-- Title,logo,Theme,Google-Font -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Cordinets</title>
    <link rel="icon" sizes="192x192" href="images/logo-nestimatic.png">
    <meta name="theme-color" content="#2196f3">
    <link href="https://fonts.googleapis.com/css?family=Lobster" rel="stylesheet">
    <meta name="keywords" content="cordinets,coordinates,noticeboard,classwork,mitaoe,maeer,pune,dhaneshpawar,students,teachers,crackmi">
    
    <!-------------------------------- Styles ------------------------------------------>
    <link rel="stylesheet" type="text/css" media="screen" href="styles/index.css">

    <!-------------------------------- Javascript -------------------------------------->
    <script src="js/jquery-3.2.1.min.js"></script>
    <script src="js/index.js"></script>

  </head>
  
  <body>
    <!-- Net connectin checking -->
    <div class="net-connection">
      <p id="ooUpdate" style="text-align: center"></p>
    </div>
    
    <div class="main">
      <center>
        
        <h1 id="floatLogo" style="display:none;">  <br>Let's Connect</h1>
        <p class="tagline" id="tagline" style="display:none;">Connect the dots and box game !</p>
        <div class="blue-line"></div>
      </center>

      <center><div class="blue-line"></div></center>
      
      <div id="sign-in-div" style="display:none;" id="sigingooglebutton">
        <center>
          <p>To play this game, you just need to </p>
          
            <div class='g-sign-in-button' id="sigingooglebutton">
              <div class=content-wrapper>
                <div class='logo-wrapper'>
                  <img src='https://developers.google.com/identity/images/g-logo.png'>
                </div>  
                  <span onclick="signinwithgoogle()" class='text-container'><span>Sign in with Google</span></span>
              </div>  
            </div>
        </center>    
      </div><br><br>
    </div>


    <br>
    <br>
    <br>


    <!-- for dev purpose -->
    <!-- <form action="devsignin" method="POST">
      <input type="text" placeholder="your email" name="email">
      <input type="submit" >
    </form> -->
    
    <!-- The core Firebase JS SDK is always required and must be listed first -->
<script src="https://www.gstatic.com/firebasejs/7.14.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/7.14.1/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/7.14.1/firebase-firestore.js"></script>
<!-- TODO: Add SDKs for Firebase products that you want to use
     https://firebase.google.com/docs/web/setup#available-libraries -->
<script src="https://www.gstatic.com/firebasejs/7.14.1/firebase-analytics.js"></script>

<script>
  // Your web app's Firebase configuration
  var firebaseConfig = {
    apiKey: "AIzaSyAzNBCGih8slQeXsHeDS_YAeTZW8oU1pqY",
    authDomain: "connect-game-5.firebaseapp.com",
    databaseURL: "https://connect-game-5.firebaseio.com",
    projectId: "connect-game-5",
    storageBucket: "connect-game-5.appspot.com",
    messagingSenderId: "540871805010",
    appId: "1:540871805010:web:1690d63064fa558985f78b",
    measurementId: "G-9791609WDB"
  };
  // Initialize Firebase
  firebase.initializeApp(firebaseConfig);
  firebase.analytics();

  const auth = firebase.auth();
  const db = firebase.firestore(); 

  var provider = new firebase.auth.GoogleAuthProvider();

  function signinwithgoogle()
{
  firebase.auth().signInWithPopup(provider).then(function(result) {
  // This gives you a Google Access Token. You can use it to access the Google API.
  var token = result.credential.accessToken;
  // The signed-in user info.
  var user = result.user;
  console.log("we got user = ",user.email)
  localStorage.setItem("user", user.email);
  window.location.replace("https://connect-game-5.firebaseapp.com/game.html")
  // ...
}).catch(function(error) {
  window.location.replace("https://connect-game-5.firebaseapp.com/game.html")
  console.log(error)
  // Handle Errors here.
  var errorCode = error.code;
  var errorMessage = error.message;
  // The email of the user's account used.
  var email = error.email;
  // The firebase.auth.AuthCredential type that was used.
  var credential = error.credential;
  // ...
});
}
</script>
</body>
</html>
